<div class="coin-insert-section">
  <h3>Click to insert coins</h3>
  <div class="coin-list">
    @for (coin of coins; track coin.label) {
    <img
      [src]="coin.img"
      [alt]="coin.label"
      (click)="insertCoin(coin.value)"
      class="coin-img"
      title="Insert {{ coin.label }}"
    />
    }
  </div>
  <div class="inserted-display">
    Inserted Amount: <strong>€{{ insertedAmount.toFixed(2) }}</strong>
  </div>

  <button
    mat-raised-button
    color="warn"
    (click)="resetInsertedMoney()"
    [disabled]="insertedAmount === 0"
  >
    <mat-icon>undo</mat-icon>
    Reset
  </button>
</div>

<h2 class="title">Available Products</h2>

<div class="product-grid">
  @for (product of products; track product.id) {
  <div class="product-card">
    @if (product.image) {
    <img [src]="product.image" alt="{{ product.name }}" class="product-img" />
    } @else {
    <img
      src="assets/image-unavailable.png"
      alt="Image unavailable"
      class="product-img"
    />
    }
    <div class="product-info">
      <h3>{{ product.name }}</h3>
      <p>Price: €{{ product.price }}</p>
      <p>Quantity in Stock: {{ product.quantity }}</p>

      <button
        mat-raised-button
        color="primary"
        (click)="buyProduct(product)"
        [disabled]="product.quantity === 0 || insertedAmount < product.price"
      >
        Buy
      </button>
    </div>
  </div>
  }
</div>
